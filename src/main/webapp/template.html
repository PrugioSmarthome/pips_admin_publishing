<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <!-- 공통: css영역(file: default.stylesheet.new) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="https://www.prugio.com/asset/images/common/favicon.ico"
    />
    <link rel="stylesheet" type="text/css" href="./styles/bootstrap.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="./styles/bootstrap-datepicker.css"
    />
    <link rel="stylesheet" type="text/css" href="./styles/all.min.css" />
    <link rel="stylesheet" type="text/css" href="./styles/jquery-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="./styles/ui.dynatree.css" />
    <link rel="stylesheet" type="text/css" href="./styles/custom.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="./styles/fontawesome-all.css"
    />
    <link rel="stylesheet" type="text/css" href="./styles/custom/main.css" />
    <!-- 공통: css영역(file: default.stylesheet.new) -->

    <!-- 공통: js영역(file: default.stylesheet.new) -->
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/jquery-1.11.2.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/jquery-3.4.1.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/jquery-ui-1.11.3.custom.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/jquery-ui.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/jquery-migrate-1.2.1.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/jquery.validate.1.13.1.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/additional-methods.1.13.1.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/jquery.form.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/jquery.simplemodal.1.4.4.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/bootstrap.bundle.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/jquery.dynatree.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/bootstrap-datepicker.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/jquery/bootstrap-datepicker.ko.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/common_ui.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/nisf.common.js?v=1"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/nisf/nisf.menupage.js?v=2"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/nisf/nisf.paging.js?v=3"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/nisf/nisf.passwd.js?v=1"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/nisf/nisf.selectbox.js?v=1"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/sockjs/sockjs.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/stomp/stomp.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/filesaver/FileSaver.min.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/notification.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf-8"
      src="./scripts/login.js"
    ></script>
    <script type="text/javascript">
      /* var current_user = '<c:out value="${session_user.userId}"/>'
    var url = '<c:out value="${stompInfo.webUrl}"/>'
    var userId = '<c:out value="${stompInfo.webUserId}"/>'
    var messageInfo = decodeMessage('<c:out value="${stompInfo.webMessage}"/>'); */

      var webSocketClient;

      function subscribeMessage() {
        var messages = messageInfo.split(":");

        if (webSocketClient != null || webSocketClient != undefined) {
          disconnectWebSocketClient(webSocketClient);
        }

        webSocketClient = initWebSocketClient(url);
        initWebSocket(webSocketClient, userId, messages[1]);
      }

      if (
        current_user != null &&
        current_user != "" &&
        current_user != undefined &&
        url != undefined &&
        userId != undefined &&
        messageInfo != undefined
      ) {
        subscribeMessage();
        setInterval(subscribeMessage, 60 * 1000);
      }

      function checkServerStatus() {
        var webServiceStatus = checkServerConnection();

        if (!webServiceStatus && current_user != null && current_user != "") {
          console.log("Server Restart or Down");
          alert("재로그인 해주십시오.");
          location.href = "/cm/login";
        }
      }

      checkServerStatus();
      setInterval(checkServerStatus, 10 * 1000);

      function checkSocketConnection() {
        var isWebAlive = checkServerConnection();

        if (isWebAlive) {
          console.log("isWebAlive is true");

          if (
            current_user != null &&
            current_user != "" &&
            current_user != undefined &&
            url != undefined &&
            userId != undefined &&
            messageInfo != undefined
          ) {
            subscribeMessage();
            setInterval(subscribeMessage, 60 * 1000);
          }
        } else {
          console.log("isWebAlive is false");
          console.log("retryInitWebSocket failure");
        }
      }

      function checkServerConnection() {
        var xhr = new XMLHttpRequest();
        var origin = window.location.origin;
        var fileUrl = origin + "/images/h1_logo.png";
        var r = Math.round(Math.random() * 10000);
        xhr.open("HEAD", fileUrl + "?subins=" + r, false);

        try {
          xhr.send();

          if (xhr.status >= 200 && xhr.status < 304) {
            return true;
          } else {
            return false;
          }
        } catch (e) {
          return false;
        }
      }

      function decodeMessage(str) {
        return decodeURIComponent(
          atob(str)
            .split("")
            .map(function (c) {
              return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
            })
            .join("")
        );
      }

      function fileDownload(fileName, fileUrl) {
        var oReq = new XMLHttpRequest();
        // The Endpoint of your server
        var URLToPDF = fileUrl;

        // Configure XMLHttpRequest
        oReq.open("GET", URLToPDF, true);

        // Important to use the blob response type
        oReq.responseType = "blob";

        // When the file request finishes
        // Is up to you, the configuration for error events etc.
        oReq.onload = function () {
          // Once the file is downloaded, open a new window with the PDF
          // Remember to allow the POP-UPS in your browser
          var file = new Blob([oReq.response], {
            type: "application/pdf",
          });

          // Generate file download directly in the browser !
          saveAs(file, fileName);
        };

        oReq.send();
      }
    </script>
    <!-- 공통: js영역(file: default.stylesheet.new) -->
  </head>

  <body>
    <script type="text/javascript"></script>

    <!-- 공통: Header 영역(file: main.header.new) -->
    <!-- <div id="nav" class="fixed-top">
      <div class="in">
        <h1 class="logo">
          <a><img src="/images/h1_logo.png" alt="" /></a>
        </h1>
        <div class="util">
          <p class="apt_name">푸르지오 스마트홈 플랫폼 시스템 관리자</p>
          <div class="btn_mypage">
            <a href="#" class="btn_pop"><i class="fas fa-user-circle"></i></a>
            <div class="pop_over">
              <p class="tit">마이페이지</p>
              <button class="btn_close">
                <img src="/images/btn_x.png" alt="" />
              </button>
              <div class="tbl_pop_over">
                <table>
                  <colgroup>
                    <col />
                    <col />
                  </colgroup>
                  <tbody>
                    <tr>
                      <th>· 사용자 ID</th>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          disabled
                          value="sysadmin"
                        />
                      </td>
                    </tr>
                    <tr>
                      <th>· 사용자 이름</th>
                      <td>
                        <input
                          type="text"
                          id="hdrUserName"
                          class="form-control"
                          value="푸르지오 스마트홈 플랫폼 시스템 관리자"
                        />
                      </td>
                    </tr>
                    <tr>
                      <th>· 사용자 그룹</th>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          disabled
                          value="SYSTEM_ADMIN"
                        />
                      </td>
                    </tr>
                    <tr>
                      <th>· 소속</th>
                      <td>
                        <input
                          type="text"
                          id="hdrDeptName"
                          class="form-control"
                          value="대우건설 IT기획팀"
                        />
                      </td>
                    </tr>
                    <tr>
                      <th>· 휴대폰 번호</th>
                      <td>
                        <input
                          type="text"
                          id="hdrTelNo"
                          class="form-control"
                          value="01012345678"
                        />
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="btm_area">
                <button type="button" class="btn btn-gray">취소</button>
                <button
                  type="button"
                  class="btn btn-bluegreen"
                  onclick="btnMyPageSave();"
                >
                  저장
                </button>
              </div>
              <span class="bul"></span>
            </div>
          </div>
          <a href="javascript:logout();" class="btn_logout"
            ><i class="fas fa-unlock"></i
          ></a>
        </div>
      </div>
    </div> -->
    <!-- 공통: Header 영역(file: main.header.new) -->

    <div id="wrap">
      <!-- 공통: GNB/Left-body 영역 (file: default.left.body) -->
      <div id="gnb" class="left-navigation">
        <div class="logo-wrap">
          <div class="gnb-logo"></div>
          <div class="btn-menu"></div>
        </div>
        <ul class="gnb-menu">
          <li id="top_menu" class="gnb-ic-dashboard">
            <a>대시보드</a>
          </li>
          <li id="top_menu" class="--active gnb-ic-complex">
            <a>단지관리</a>
          </li>
          <li id="sub_menu_link" class="mt-3"><a>단지정보 관리</a></li>
          <li id="sub_menu"><a>세대장치 관리</a></li>
          <li id="sub_menu"><a>방문차량 관리</a></li>
          <li id="sub_menu" class="mb-3"><a>단지 관리비 관리</a></li>
          <li id="top_menu">
            <a>앱 서랍 관리</a>
          </li>
          <li id="sub_menu"><a>hhhhhhhhh</a></li>
          <li id="sub_menu"><a>jjjjjjjjjjjj</a></li>
          <li id="sub_menu"><a>jjjjjjjj</a></li>
          <li id="sub_menu"><a>jjjjjjjjjj</a></li>
          <li id="top_menu">
            <a>zzzzzzzzzzzzz</a>
          </li>
          <li id="sub_menu"><a>xxxxxxxxxx</a></li>
          <li id="sub_menu"><a>xxxxxx</a></li>
          <li id="sub_menu"><a>yyyyyyyyy</a></li>
          <li id="sub_menu"><a>jjjjjjjjjj</a></li>
          <li id="top_menu">
            <a>jjjjjj</a>
          </li>
          <li id="sub_menu"><a>hhhhhhhh</a></li>
          <li id="sub_menu"><a>ttttttttt</a></li>
          <li id="sub_menu"><a>3333333</a></li>
          <li id="sub_menu"><a>2222</a></li>
        </ul>
        <div class="gnb-user" data-toggle="modal" data-target="#modal2">
          <span>홍길동</span>님
        </div>
      </div>
      <!-- 공통: GNB/Left-body 영역 (file: default.left.body) -->

      <!-- Right-body 영역 실제 페이지 -->
      <div id="container">
        <div class="custom-layout">
          <div class="title-wrap">
            <h1>단지 목록</h1>
            <span class="bread-crumbs"
              >단지관리 > 단지정보 관리 > 단지 목록</span
            >
          </div>
          <div class="board-search mb-3">
            <div class="board-search-left border-right">
                <div class="d-flex align-center border-bottom m-d-block">
                    <div class="border-line border-right">
                        <div class="index-fix">
                            <span class="dot-text">단지명</span>
                        </div>
                        <div class="d-flex align-center w-100">
                        <input type="text" class="custom-input w-100 mr-2 m-m-0" name="firstName" disabled required />
                        <button class="custom-button fit-button color-brown" data-toggle="modal" data-target="#modal1">선택</button>
                    </div>
                    </div>
                    <div class="border-line">
                        <div class="index-fix">
                            <span class="dot-text">단지상태</span>
                        </div>
                            <select class="custom-select" id="Yn">
                                <option value="all">전체</option>
                                <option value="N">활성화</option>
                                <option value="Y">비활성화</option>
                            </select>
                            <!-- <input type="text" class="custom-input ml8 m-m-0" name="firstName" placeholder="군/구" required /> -->
                    </div>
                </div>
                <div class="border-line ">
                    <div class="index-fix">
                        <span class="dot-text">홈넷서버</span>
                    </div>
                    <input type="text" class="custom-input w-100 m-m-0" name="firstName" required />
                </div>
            </div>
            <div class="board-search-right">
                <button class="custom-button fill-height color-black">검색</button>
            </div>
        </div>
          <div class="table_wrap">
            <div id="user_table_wrapper" class="dataTables_wrapper no-footer">
              <div>
                <div
                  class="dataTables_info"
                  id="user_table_info"
                  role="status"
                  aria-live="polite"
                >
                  Total <span>42</span>건
                </div>
                <div>
                  <table class="table" id="user_table">
                    <thead>
                      <tr>
                        <th scope="col">등록일</th>
                        <th scope="col">단지상태</th>
                        <th scope="col">단지코드</th>
                        <th scope="col">단지명</th>
                        <th scope="col">홈넷서버</th>
                      </tr>
                    </thead>
                    <tbody style="text-align: center">
                      <tr>
                        <td><a href="#">2021-09-06 17:18</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000043</a></td>
                        <td><a href="#">광양푸르지오더퍼스트</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                      <tr>
                        <td><a href="#">2021-09-06 16:19</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000042</a></td>
                        <td><a href="#">다산신도시자연앤푸르지오</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                      <tr>
                        <td><a href="#">2021-09-06 17:18</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000043</a></td>
                        <td><a href="#">광양푸르지오더퍼스트</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                      <tr>
                        <td><a href="#">2021-09-06 16:19</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000042</a></td>
                        <td><a href="#">다산신도시자연앤푸르지오</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                      <tr>
                        <td><a href="#">2021-09-06 17:18</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000043</a></td>
                        <td><a href="#">광양푸르지오더퍼스트</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                      <tr>
                        <td><a href="#">2021-09-06 16:19</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000042</a></td>
                        <td><a href="#">다산신도시자연앤푸르지오</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                      <tr>
                        <td><a href="#">2021-09-06 17:18</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000043</a></td>
                        <td><a href="#">광양푸르지오더퍼스트</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                      <tr>
                        <td><a href="#">2021-09-06 16:19</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000042</a></td>
                        <td><a href="#">다산신도시자연앤푸르지오</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                      <tr>
                        <td><a href="#">2021-09-06 17:18</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000043</a></td>
                        <td><a href="#">광양푸르지오더퍼스트</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                      <tr>
                        <td><a href="#">2021-09-06 16:19</a></td>
                        <td><a href="#">활성화</a></td>
                        <td><a href="#">000042</a></td>
                        <td><a href="#">다산신도시자연앤푸르지오</a></td>
                        <td><a href="#">코콤</a></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 단지선택 팝업 -->
      <div class="modal fade" id="modal1" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <!-- 모달헤더 -->
            <div class="modal-header">
              <h5 class="modal-title">단지선택</h5>
              <button
                type="button"
                id="closebtn"
                class="close"
                data-dismiss="modal"
              >
                <img src="/images/btn_x.png" alt="" />
              </button>
            </div>
            <!-- //모달헤더 -->

            <!-- 모달바디 -->
            <div class="modal-body">
              <!-- 검색영역 -->
              <div class="search_area">
                <table>
                  <colgroup>
                    <col style="width: 70px" />
                    <col />
                    <col style="width: 95px" />
                  </colgroup>
                  <tbody>
                    <tr>
                      <th>· 검색어</th>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          id="search_text"
                        />
                      </td>
                      <td class="text-right">
                        <button
                          type="button"
                          id="search_btn"
                          class="btn btn-brown btn-sm"
                        >
                          검색
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <!-- //검색영역 -->

              <!-- 테이블상단 -->
              <div class="tbl_top_info mt-4"></div>
              <!-- //테이블상단 -->

              <!-- 테이블 -->
              <div class="table_wrap mt-3">
                <table
                  class="table"
                  id="list_table"
                  style="width: 100%; text-align: center"
                >
                  <thead>
                    <tr>
                      <th scope="col">항목</th>
                      <th scope="col">선택</th>
                    </tr>
                  </thead>
                  <tbody id="householdDeviceList">
                    <tr role="row" class="odd">
                      <td>전체</td>
                      <td>
                        <input
                          class="btn btn-gray btn-sm"
                          type="button"
                          value="선택"
                        />
                      </td>
                    </tr>
                    <tr role="row" class="odd">
                      <td>1단지</td>
                      <td>
                        <input
                          class="btn btn-gray btn-sm"
                          type="button"
                          value="선택"
                        />
                      </td>
                    </tr>
                    <tr role="row" class="odd">
                      <td>2단지</td>
                      <td>
                        <input
                          class="btn btn-gray btn-sm"
                          type="button"
                          value="선택"
                        />
                      </td>
                    </tr>
                    <tr role="row" class="odd">
                      <td>#단지</td>
                      <td>
                        <input
                          class="btn btn-gray btn-sm"
                          type="button"
                          value="선택"
                        />
                      </td>
                    </tr>
                    <tr role="row" class="odd">
                      <td>4단지</td>
                      <td>
                        <input
                          class="btn btn-gray btn-sm"
                          type="button"
                          value="선택"
                        />
                      </td>
                    </tr>
                    <tr role="row" class="odd">
                      <td>5단지</td>
                      <td>
                        <input
                          class="btn btn-gray btn-sm"
                          type="button"
                          value="선택"
                        />
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <!-- //테이블 -->
            </div>
            <!-- //모달바디 -->
          </div>
        </div>
      </div>
      <!-- 내정보 팝업 -->
      <div class="modal fade" id="modal2" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content custom-modal">
            <!-- 모달헤더 -->
            <div class="modal-header">
              <h5 class="modal-title">마이페이지</h5>
              <div id="closebtn" data-dismiss="modal" class="modal-close"></div>
            </div>
            <!-- //모달헤더 -->

            <!-- 모달바디 -->
            <div class="modal-body">
                <div class="info-line">
					<div class="info-line__index">아이디</div>
					<div class="info-line__value">abc@gmail.com</div>
				</div>
                <div class="info-line">
					<div class="info-line__index">아이디</div>
					<div class="info-line__value">abc@gmail.com</div>
				</div>
                <div class="info-line">
					<div class="info-line__index">아이디</div>
					<div class="info-line__value">abc@gmail.com</div>
				</div>
                <div class="info-line">
					<div class="info-line__index">아이디</div>
					<div class="info-line__value">abc@gmail.com</div>
				</div>
             </div>
             <div class="button-wrap">
                <button class="custom-button fit-button color-outline-black mr-3"> 비밀번호 재설정 </button>
                <button class="custom-button fit-button color-black"> 로그아웃 </button>
            </div>
            <!-- //모달바디 -->

          </div>
        </div>
      </div>
      <!-- Right-body 영역 실제 페이지 -->
    </div>
  </body>
</html>
